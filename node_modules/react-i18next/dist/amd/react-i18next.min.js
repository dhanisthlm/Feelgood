define(["exports","react","prop-types"],function(t,e,n){"use strict";function r(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function i(t,e){if(r(t,e))return!0;if("object"!==(void 0===t?"undefined":C(t))||null===t||"object"!==(void 0===e?"undefined":C(e))||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(var o=0;o<n.length;o++)if(!D.call(e,n[o])||!r(t[n[o]],e[n[o]]))return!1;return!0}function o(t){K=R({},K,t)}function a(){return K}function s(t){q=t}function c(){return q}function u(t){return t.displayName||t.name||"Component"}function p(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(o){var s=function(e){function n(e,i){E(this,n);var o=W(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,i));o.i18n=i.i18n||e.i18n||r.i18n||c(),"string"==typeof(t=t||o.i18n.options.defaultNS)&&(t=[t]);var s=o.i18n&&o.i18n.options.react||{};return o.options=R({},a(),s,r),o.getWrappedInstance=o.getWrappedInstance.bind(o),o}return A(n,e),N(n,[{key:"shouldComponentUpdate",value:function(t){return!this.options.usePureComponent||!i(this.props,t)}},{key:"getWrappedInstance",value:function(){return this.options.withRef||console.error("To access the wrapped instance, you need to specify { withRef: true } as the second argument of the translate() call."),this.wrappedInstance}},{key:"render",value:function(){var e=this,n={};return this.options.withRef&&(n.ref=function(t){e.wrappedInstance=t}),j.createElement(H,R({ns:t},this.options,this.props,{i18n:this.i18n}),function(t,r){return j.createElement(o,R({},e.props,n,r))})}}]),n}(e.Component);return s.WrappedComponent=o,s.contextTypes={i18n:n.object},s.displayName="Translate("+u(o)+")",s.namespaces=t,T(s,o)}}function l(t,e,n,r,i){var o=e.indexOf("<",r),a=e.slice(r,-1===o?void 0:o);/^\s*$/.test(a)&&(a=" "),(!i&&o>-1&&n+t.length>=0||" "!==a)&&t.push({type:"text",content:a})}function f(t){var e=[];for(var n in t)e.push(n+'="'+t[n]+'"');return e.length?" "+e.join(" "):""}function h(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?f(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(h,"")+"</"+e.name+">"}}function d(t){return t&&(t.children||t.props&&t.props.children)}function y(t){return t&&t.children?t.children:t.props&&t.props.children}function v(t,e,n){return"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]),e.forEach(function(e,n){var r=""+n;if("string"==typeof e)t=""+t+e;else if(d(e))t=t+"<"+r+">"+v("",y(e),n+1)+"</"+r+">";else if(j.isValidElement(e))t=t+"<"+r+"></"+r+">";else if("object"===(void 0===e?"undefined":C(e))){var i=R({},e),o=i.format;delete i.format;var a=Object.keys(i);o&&1===a.length?t=t+"<"+r+">{{"+a[0]+", "+o+"}}</"+r+">":1===a.length?t=t+"<"+r+">{{"+a[0]+"}}</"+r+">":console&&console.warn&&console.warn("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",e)}else console&&console.warn&&console.warn("react-i18next: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",e)}),t}function m(t,e,n){function r(t,e){return"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]),"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]),e.reduce(function(e,i,o){if("tag"===i.type){var a=t[parseInt(i.name,10)]||{},s=j.isValidElement(a);if("string"==typeof a)e.push(a);else if(d(a)){var c=r(y(a),i.children);a.dummy&&(a.children=c),e.push(j.cloneElement(a,R({},a.props,{key:o}),c))}else if("object"!==(void 0===a?"undefined":C(a))||s)e.push(a);else{var u=n.services.interpolator.interpolate(i.children[0].content,a,n.language);e.push(u)}}else"text"===i.type&&e.push(i.content);return e},[])}return""===e?[]:y(r([{dummy:!0,children:t}],Q.parse("<0>"+e+"</0>"))[0])}function g(t,e){for(var n=0,r=t.length;n<r;n++)if("object"===C(t[n])){var i=!0,o=!1,a=void 0;try{for(var s,c=Object.entries(t[n])[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=M(s.value,2),p=u[0];e(u[1],n,p)}}catch(t){o=!0,a=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}}else e(t[n],n)}function b(t){var e=[];return g(t,function(t){t&&t.namespaces&&t.namespaces.forEach(function(t){-1===e.indexOf(t)&&e.push(t)})}),e}var j="default"in e?e.default:e;n=n&&n.hasOwnProperty("default")?n.default:n;var O={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},S={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},w=Object.defineProperty,x=Object.getOwnPropertyNames,I=Object.getOwnPropertySymbols,k=Object.getOwnPropertyDescriptor,P=Object.getPrototypeOf,_=P&&P(Object),T=function t(e,n,r){if("string"!=typeof n){if(_){var i=P(n);i&&i!==_&&t(e,i,r)}var o=x(n);I&&(o=o.concat(I(n)));for(var a=0;a<o.length;++a){var s=o[a];if(!(O[s]||S[s]||r&&r[s])){var c=k(n,s);try{w(e,s,c)}catch(t){}}}return e}return e},C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E=(function(){function t(t){this.value=t}function e(e){function n(i,o){try{var a=e[i](o),s=a.value;s instanceof t?Promise.resolve(s.value).then(function(t){n("next",t)},function(t){n("throw",t)}):r(a.done?"return":"normal",a.value)}catch(t){r("throw",t)}}function r(t,e){switch(t){case"return":i.resolve({value:e,done:!0});break;case"throw":i.reject(e);break;default:i.resolve({value:e,done:!1})}(i=i.next)?n(i.key,i.arg):o=null}var i,o;this._invoke=function(t,e){return new Promise(function(r,a){var s={key:t,arg:e,resolve:r,reject:a,next:null};o?o=o.next=s:(i=o=s,n(t,e))})},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),N=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),R=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},A=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},L=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},W=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},M=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),D=Object.prototype.hasOwnProperty,K={wait:!1,withRef:!1,bindI18n:"languageChanged loaded",bindStore:"added removed",translateFuncName:"t",nsMode:"default",usePureComponent:!1},q=void 0,$={type:"3rdParty",init:function(t){o(t.options.react),s(t)}},z=!1,H=function(t){function e(t,n){E(this,e);var r=W(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));r.i18n=n.i18n||t.i18n||c(),r.namespaces=r.props.ns||r.i18n.options.defaultNS,"string"==typeof r.namespaces&&(r.namespaces=[r.namespaces]);var i=r.i18n&&r.i18n.options.react||{};r.options=R({},a(),i,t),t.initialI18nStore&&(r.i18n.services.resourceStore.data=t.initialI18nStore,r.options.wait=!1),t.initialLanguage&&r.i18n.changeLanguage(t.initialLanguage),r.i18n.options.isInitialSSR&&(r.options.wait=!1);var o=r.i18n.languages&&r.i18n.languages[0],s=!!o&&r.namespaces.every(function(t){return r.i18n.hasResourceBundle(o,t)});return r.state={i18nLoadedAt:null,ready:s},r.onI18nChanged=r.onI18nChanged.bind(r),r.getI18nTranslate=r.getI18nTranslate.bind(r),r}return A(e,t),N(e,[{key:"getChildContext",value:function(){return{t:this.t,i18n:this.i18n}}},{key:"componentWillMount",value:function(){this.t=this.getI18nTranslate()}},{key:"componentDidMount",value:function(){var t=this,e=function(){t.options.bindI18n&&t.i18n&&t.i18n.on(t.options.bindI18n,t.onI18nChanged),t.options.bindStore&&t.i18n.store&&t.i18n.store.on(t.options.bindStore,t.onI18nChanged)};this.mounted=!0,this.i18n.loadNamespaces(this.namespaces,function(){var n=function(){t.mounted&&!t.state.ready&&t.setState({ready:!0}),t.options.wait&&t.mounted&&e()};if(t.i18n.isInitialized)n();else{t.i18n.on("initialized",function e(){setTimeout(function(){t.i18n.off("initialized",e)},1e3),n()})}}),this.options.wait||e()}},{key:"componentWillUnmount",value:function(){var t=this;this.mounted=!1,this.onI18nChanged&&(this.options.bindI18n&&this.options.bindI18n.split(" ").forEach(function(e){return t.i18n.off(e,t.onI18nChanged)}),this.options.bindStore&&this.options.bindStore.split(" ").forEach(function(e){return t.i18n.store&&t.i18n.store.off(e,t.onI18nChanged)}))}},{key:"onI18nChanged",value:function(){this.mounted&&(this.t=this.getI18nTranslate(),this.setState({i18nLoadedAt:new Date}))}},{key:"getI18nTranslate",value:function(){return this.i18n.getFixedT(null,"fallback"===this.options.nsMode?this.namespaces:this.namespaces[0])}},{key:"render",value:function(){var t=this,e=this.props.children;return!this.state.ready&&this.options.wait?null:(this.i18n.options.isInitialSSR&&!z&&(z=!0,setTimeout(function(){delete t.i18n.options.isInitialSSR},100)),e(this.t,{i18n:this.i18n,t:this.t}))}}]),e}(e.Component);H.contextTypes={i18n:n.object},H.childContextTypes={t:n.func.isRequired,i18n:n.object},p.setDefaults=o,p.setI18n=s;var V=function(t){function e(t,n){E(this,e);var r=W(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.i18n=t.i18n||n.i18n,r.t=t.t||n.t,r}return A(e,t),N(e,[{key:"render",value:function(){var t=this,e=this.props.parent||"span",n=this.props.regexp||this.i18n.services.interpolator.regexp,r=this.props,i=r.className,o=r.style,a=this.props.useDangerouslySetInnerHTML||!1,s=this.props.dangerouslySetInnerHTMLPartElement||"span",c=R({},this.props.options,{interpolation:{prefix:"#$?",suffix:"?$#"}}),u=this.t(this.props.i18nKey,c);if(!u||"string"!=typeof u)return j.createElement("noscript",null);var p=[],l=function(e,n){if(e.indexOf(t.i18n.options.interpolation.formatSeparator)<0)return void 0===n[e]&&t.i18n.services.logger.warn("interpolator: missed to pass in variable "+e+" for interpolating "+u),n[e];var r=e.split(t.i18n.options.interpolation.formatSeparator),i=r.shift().trim(),o=r.join(t.i18n.options.interpolation.formatSeparator).trim();return void 0===n[i]&&t.i18n.services.logger.warn("interpolator: missed to pass in variable "+i+" for interpolating "+u),t.i18n.options.interpolation.format(n[i],o,t.i18n.language)};u.split(n).reduce(function(e,n,r){var i=void 0;if(r%2==0){if(0===n.length)return e;i=a?j.createElement(s,{dangerouslySetInnerHTML:{__html:n}}):n}else i=l(n,t.props);return e.push(i),e},p);var f={};if(this.i18n.options.react&&this.i18n.options.react.exposeNamespace){var h="string"==typeof this.t.ns?this.t.ns:this.t.ns[0];this.props.i18nKey&&this.i18n.options.nsSeparator&&this.props.i18nKey.indexOf(this.i18n.options.nsSeparator)>-1&&(h=this.props.i18nKey.split(this.i18n.options.nsSeparator)[0]),this.t.ns&&(f["data-i18next-options"]=JSON.stringify({ns:h}))}return i&&(f.className=i),o&&(f.style=o),j.createElement.apply(this,[e,f].concat(p))}}]),e}(e.PureComponent);V.propTypes={className:n.string},V.defaultProps={className:""},V.contextTypes={i18n:n.object.isRequired,t:n.func.isRequired};var F={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},J=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,U=function(t){var e,n=0,r=!0,i={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return t.replace(J,function(o){if("="===o)return r=!0,void n++;r?0===n?((F[o]||"/"===t.charAt(t.length-2))&&(i.voidElement=!0),i.name=o):(i.attrs[e]=o.replace(/^['"]|['"]$/g,""),e=void 0):(e&&(i.attrs[e]=e),e=o),n++,r=!1}),i},B=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,G=Object.create?Object.create(null):{},Q={parse:function(t,e){e||(e={}),e.components||(e.components=G);var n,r=[],i=-1,o=[],a=!1;return t.replace(B,function(s,c){if(a){if(s!=="</"+n.name+">")return;a=!1}var u,p="/"!==s.charAt(1),f=0===s.indexOf("\x3c!--"),h=c+s.length,d=t.charAt(h);p&&!f&&(i++,"tag"===(n=U(s)).type&&e.components[n.name]&&(n.type="component",a=!0),n.voidElement||a||!d||"<"===d||l(n.children,t,i,h,e.ignoreWhitespace),0===i&&r.push(n),(u=o[i-1])&&u.children.push(n),o[i]=n),(f||!p||n.voidElement)&&(f||i--,!a&&"<"!==d&&d&&l(u=-1===i?r:o[i].children,t,i,h,e.ignoreWhitespace))}),!r.length&&t.length&&l(r,t,0,0,e.ignoreWhitespace),r},stringify:function(t){return t.reduce(function(t,e){return t+h("",e)},"")}},X=function(t){function e(){return E(this,e),W(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return A(e,t),N(e,[{key:"render",value:function(){var t=R({i18n:this.context.i18n,t:this.context.t},this.props),e=t.children,n=t.count,r=t.parent,i=t.i18nKey,o=t.i18n,a=t.t,s=L(t,["children","count","parent","i18nKey","i18n","t"]),c=a||o.t.bind(o),u=o.options&&o.options.react||{},p=void 0!==r?r:u.defaultTransParent,l=v("",e,0),f=u.hashTransKey,h=i||(f?f(l):l),d=h?c(h,{interpolation:{prefix:"#$?",suffix:"?$#"},defaultValue:l,count:n}):l;if(u.exposeNamespace){var y="string"==typeof c.ns?c.ns:c.ns[0];i&&o.options.nsSeparator&&i.indexOf(o.options.nsSeparator)>-1&&(y=i.split(o.options.nsSeparator)[0]),c.ns&&(s["data-i18next-options"]=JSON.stringify({ns:y}))}return p?j.createElement(p,s,m(e,d,o)):m(e,d,o)}}]),e}(j.Component);X.propTypes={count:n.number,parent:n.node,i18nKey:n.string,i18n:n.object,t:n.func},X.contextTypes={i18n:n.object.isRequired,t:n.func};var Y=function(t){function n(t,e){E(this,n);var r=W(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e));return r.i18n=t.i18n,t.initialI18nStore&&(r.i18n.services.resourceStore.data=t.initialI18nStore,r.i18n.options.isInitialSSR=!0),t.initialLanguage&&r.i18n.changeLanguage(t.initialLanguage),r}return A(n,t),N(n,[{key:"getChildContext",value:function(){return{i18n:this.i18n}}},{key:"componentWillReceiveProps",value:function(t){if(this.props.i18n!==t.i18n)throw new Error("[react-i18next][I18nextProvider]does not support changing the i18n object.")}},{key:"render",value:function(){var t=this.props.children;return e.Children.only(t)}}]),n}(e.Component);Y.propTypes={i18n:n.object.isRequired,children:n.element.isRequired},Y.childContextTypes={i18n:n.object.isRequired},Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r}),t.translate=p,t.I18n=H,t.Interpolate=V,t.Trans=X,t.I18nextProvider=Y,t.loadNamespaces=function(t){var e=t.components,n=t.i18n,r=b(e);return new Promise(function(t){n.loadNamespaces(r,t)})},t.reactI18nextModule=$,t.setDefaults=o,t.getDefaults=a,t.setI18n=s,t.getI18n=c,Object.defineProperty(t,"__esModule",{value:!0})});
