{"version":3,"sources":["index.js"],"names":["Checkout","props","state","name","mail","phone","comment","code","data","isOpen","validatorTypes","resetCheckout","bind","handleSubmit","handleChange","breakpoints","children","item","width","getWinWidth","setState","skype","email","cost","packageDiscount","promoDiscount","el","offsetParent","dataset","size","nextProps","console","log","dispatch","push","e","target","id","value","validate","error","prop","getValidationMessages","map","message","t","front","save","back","skypeCost","skypeDurationFactor","skypeDuration","factor","emailCost","emailDiscount","week","nWeeks","firstColSize","lastColSize","sumClass","checkout","basket","description","Math","round","className","total","getValidatorData","propTypes","func","mapStateToProps","encounter","saved"],"mappings":"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","file":"index.js","sourceRoot":"/Users/danieljansson/Feelgood/src/components/Public/Checkout","sourcesContent":["import React, { Component, PropTypes } from 'react'\nimport { connect } from 'react-redux';\nimport { translate } from 'react-i18next';\nimport validation from 'react-validation-mixin';\nimport strategy from 'joi-validation-strategy';\nimport FormComponent from '../../FormComponent';\nimport { routeActions } from 'redux-simple-router';\nimport { encounterValidator } from '../../../../validators/encounters';\nimport { i18nValidation } from  '../../../../helpers/validation';\nimport { saveEncounter, resetEncounter } from '../../../actions/encounter';\nimport Header from '../Header';\nimport styles from './styles.css';\n\nexport class Checkout extends FormComponent {\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tname: '',\n\t\t\tmail: '',\n\t\t\tphone: '',\n\t\t\tcomment: '',\n\t\t\tcode: '',\n\t\t\tdata: '',\n\t\t\tisOpen: false\n\t\t};\n\n\t\tthis.validatorTypes = encounterValidator;\n\t\tthis.resetCheckout = this.resetCheckout.bind(this);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t}\n\n\tcomponentDidMount () {\n        for (let item of this.breakpoints.children) {\n            const width = this.getWinWidth(item);\n\n            if (width) {\n                this.width = width;\n            }\n        }\n\n        this.setState({\n            isOpen: true,\n            skype: this.props.data.skype,\n            email: this.props.data.email,\n            cost: this.props.cost,\n            packageDiscount: this.props.data.packageDiscount,\n            promoDiscount: this.props.data.promoDiscount,\n            data: this.props.data\n        });\n\n    }\n\n    getWinWidth(el) {\n\t\tif (el.offsetParent !== null) {\n\t\t\treturn el.dataset.size;\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tcomponentWillReceiveProps (nextProps) {\n\t\tconsole.log('foooooo', nextProps)\n\t\tthis.setState({\n\t\t\tisOpen: true,\n\t\t\tskype: nextProps.data.skype,\n\t\t\temail: nextProps.data.email,\n\t\t\tcost: nextProps.cost,\n\t\t\tpackageDiscount: nextProps.data.packageDiscount,\n\t\t\tpromoDiscount: nextProps.data.promoDiscount,\n\t\t\tdata: nextProps.data\n\t\t});\n\t}\n\n    getValidatorData() {\n        return this.state\n    }\n\n\tresetCheckout () {\n\t\tthis.setState({\n            name: '',\n            mail: '',\n            phone: '',\n            comment: '',\n\t\t\tcode: '',\n\t\t\tisOpen: false\n\t\t});\n\n\t\tthis.props.dispatch(resetEncounter());\n        this.props.dispatch(routeActions.push('/anka'));\n\t}\n\n\thandleChange (e) {\n\t\tthis.setState({ [e.target.id]: e.target.value })\n\t}\n\n\thandleSubmit () {\n\t\tthis.props.validate((error) => {\n            if (!error) {\n                this.props.dispatch(saveEncounter(this.state));\n\t\t\t}\n        })\n\t}\n\n\tgetValidationMessages (prop) {\n\t\treturn (\n            this.props.getValidationMessages(prop).map((message) => {\n\t\t\t\treturn <span className=\"error\">{message}</span>;\n            })\n\t\t)\n\t}\n\n\trender () {\n\t\tconst { t } = this.props;\n        const front = (this.props.save === true) ? 'front none' : 'front';\n        const back = (this.props.save === false) ? 'back none' : 'back';\n        const skypeCost = this.props.data.skype ? this.props.data.skype.cost :Â 0;\n        const skypeDurationFactor = this.props.data.skypeDuration.factor;\n\t\tconst emailCost = this.props.data.email ? this.props.emailDiscount / this.props.data.email.week : 0;\n\t\tconst nWeeks = this.props.data.email ? this.props.data.email.week : 0;\n\t\tconst firstColSize = (this.width === 'small') ? '50%' : '60%';\n\t\tconst lastColSize = (this.width === 'small') ? '30%' : '20%';\n\t\tconst sumClass =\n\t\t\t(typeof this.props.data.packageDiscount === 'undefined' &&\n\t\t\ttypeof this.props.data.promoDiscount === 'undefined')\n\t\t\t\t? 'right heavy' : 'right';\n\n\t\treturn (\n\t\t\t<div className=\"page\">\n\t\t\t\t<Header />\n\t\t\t\t<div ref={(checkout) => { this.checkout = checkout; }} className=\"checkout\">\n\t\t\t\t\t<div ref={(basket) => { this.basket = basket; }} className=\"basket\">\n\t\t\t\t\t\t<div className=\"header\">\n\t\t\t\t\t\t\t<h1>{ t('heading') }</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"outer-frame\">\n\t\t\t\t\t\t\t<div className=\"inner-frame\">\n\t\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t\t<col width={firstColSize} />\n\t\t\t\t\t\t\t\t\t\t<col width=\"20%\" />\n\t\t\t\t\t\t\t\t\t\t<col width={lastColSize} />\n\t\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th>{ t('item') }</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>{ t('weeks') }</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>{ t('price') }</th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\t\t\t\tif (this.props.data.skype) {\n\t\t\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{this.props.data.skype.description}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"center\">{this.props.data.skype.week}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"right\">{Math.round(skypeCost * skypeDurationFactor)} KM</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\t\t\t\tif (this.props.data.email) {\n\t\t\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{this.props.data.email.description}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"center\">{this.props.data.email.week}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"right\">{this.props.emailDiscount} KM</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td>&nbsp;</td>\n\t\t\t\t\t\t\t\t\t\t<td>&nbsp;</td>\n\t\t\t\t\t\t\t\t\t\t<td>&nbsp;</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className={sumClass} colSpan=\"2\">{ t('sum') }</td>\n\t\t\t\t\t\t\t\t\t\t<td className={sumClass}>{Math.round(skypeCost * skypeDurationFactor) + (emailCost * nWeeks)} KM</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\t\t\t\tif (this.props.data.packageDiscount) {\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"right\" colSpan=\"2\">{ t('packageDiscount') }</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"right\">{this.props.data.packageDiscount} KM</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\t\t\t\tif (this.props.data.packageDiscount > 0) {\n\t\t\t\t\t\t\t\t\t\t\tconst className = this.props.data.promoDiscount\n\t\t\t\t\t\t\t\t\t\t\t\t? 'right' : 'right heavy';\n\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className={className} colSpan=\"2\">{ t('sumWithPackageDiscount')}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className={className}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(Math.round(this.props.data.skype.cost * skypeDurationFactor) + (emailCost * nWeeks)) - this.props.data.packageDiscount} KM\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\t\t\t\tif (this.props.data.promoDiscount) {\n\t\t\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"right\" colSpan=\"2\">{ t('voucherDiscount') }</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"right\">{this.props.data.promoDiscount} KM</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t\t{(() => {\n\t\t\t\t\t\t\t\t\t\tif (this.props.data.promoDiscount) {\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"right heavy\" colSpan=\"2\">{ t('total') }</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"right heavy\">{ this.props.cost.total } KM</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})()}\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t<div ref={(front) => { this.front = front; }} className={front}>\n\t\t\t\t\t\t\t\t\t<div className=\"form-element-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"name\">{ t('name') }</label>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tonChange={ this.handleChange }\n\t\t\t\t\t\t\t\t\t\t\tid=\"name\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.name}/>\n\t\t\t\t\t\t\t\t\t\t{this.getValidationMessages('name')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-element-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"phone\">{ t('phone') }</label>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tonChange={ this.handleChange }\n\t\t\t\t\t\t\t\t\t\t\tid=\"phone\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.phone}/>\n\t\t\t\t\t\t\t\t\t\t{this.getValidationMessages('phone')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-element-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"email\">{ t('email') }</label>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tonChange={ this.handleChange }\n\t\t\t\t\t\t\t\t\t\t\tid=\"mail\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.mail}/>\n\t\t\t\t\t\t\t\t\t\t{this.getValidationMessages('mail')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-element-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"skype\">Skype name</label>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tonChange={ this.handleChange }\n\t\t\t\t\t\t\t\t\t\t\tid=\"mail\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.mail}/>\n\t\t\t\t\t\t\t\t\t\t{this.getValidationMessages('mail')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-element-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"skype\">Issue</label>\n\t\t\t\t\t\t\t\t\t\t<div className=\"select-style\">\n\t\t\t\t\t\t\t\t\t\t\t<select>\n\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"volvo\">Stres</option>\n\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"saab\">Diete</option>\n\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"mercedes\">Sukob</option>\n\t\t\t\t\t\t\t\t\t\t\t\t<option value=\"audi\">Bol</option>\n\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-element-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"comment\">{ t('comment') }</label>\n\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\tclassName={ this.getValidatorData('comment') }\n\t\t\t\t\t\t\t\t\t\t\tonChange={ this.handleChange }>\n\t\t\t\t\t\t\t\t\t\t\t{this.state.comment}\n\t\t\t\t\t\t\t\t\t\t</textarea>\n\t\t\t\t\t\t\t\t\t\t{this.getValidationMessages('comment')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-buttons\">\n\t\t\t\t\t\t\t\t\t\t<button onClick={ this.resetCheckout }>{ t('back') }</button>\n\t\t\t\t\t\t\t\t\t\t<button onClick={ this.handleSubmit }>{ t('placeOrder') }</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={back}>\n\t\t\t\t\t\t\t\t\t<p>{ t('pleasePay') }</p>\n\t\t\t\t\t\t\t\t\t<p>YYY YYY YYY YYY</p>\n\t\t\t\t\t\t\t\t\t<p>{ t('includeIdData')}</p>\n\t\t\t\t\t\t\t\t\t<p >{this.props.cost.code}</p>\n\t\t\t\t\t\t\t\t\t<p>{ t('callbackAffirmation') }</p>\n\t\t\t\t\t\t\t\t\t<p>{ t('invoiceAffirmation') }</p>\n\t\t\t\t\t\t\t\t\t<p>Mnogo hvala, tim zdravilje</p>\n\t\t\t\t\t\t\t\t\t<button onClick={ this.resetCheckout }>{ t('close') }</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"breakpoints\" ref={(breakpoints) => { this.breakpoints = breakpoints; }}>\n\t\t\t\t\t<div className=\"breakpoint-small\" data-size=\"small\"></div>\n\t\t\t\t\t<div className=\"breakpoint-medium\" data-size=\"medium\"></div>\n\t\t\t\t\t<div className=\"breakpoint-large\" data-size=\"large\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nCheckout.propTypes = { dispatch: PropTypes.func };\n\nconst mapStateToProps = (state) => ({\n\tsave: state.encounter.saved,\n\tdata: state.encounter.data,\n\tcost: state.encounter.cost,\n\temailDiscount: state.encounter.emailDiscount,\n\tpromoDiscount: state.encounter.promoDiscount\n});\n\nexport default connect(mapStateToProps)(translate('checkoutView')(validation(strategy(i18nValidation()))(Checkout)));\n"]}