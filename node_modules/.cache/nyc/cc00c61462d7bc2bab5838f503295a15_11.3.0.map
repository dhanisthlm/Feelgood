{"version":3,"sources":["index.js"],"names":["Checkout","props","state","name","mail","phone","comment","code","data","isOpen","validatorTypes","resetCheckout","bind","handleSubmit","handleChange","setState","skype","email","cost","packageDiscount","promoDiscount","dispatch","e","target","id","value","validate","error","basket","style","height","front","offsetHeight","prop","getValidationMessages","map","message","t","save","back","skypeCost","skypeDurationFactor","skypeDuration","factor","emailCost","emailDiscount","week","nWeeks","checkout","description","Math","round","className","total","getValidatorData","propTypes","func","mapStateToProps","encounter","saved"],"mappings":"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","file":"index.js","sourceRoot":"/Users/danieljansson/Feelgood/src/components/Public/Checkout","sourcesContent":["import React, { Component, PropTypes } from 'react'\nimport { connect } from 'react-redux';\nimport { translate } from 'react-i18next';\nimport validation from 'react-validation-mixin';\nimport strategy from 'joi-validation-strategy';\nimport FormComponent from '../../FormComponent';\nimport { encounterValidator } from '../../../../validators/encounters';\nimport { i18nValidation } from  '../../../../helpers/validation';\nimport { saveEncounter, resetEncounter } from '../../../actions/encounter';\nimport styles from './styles.css';\n\nexport class Checkout extends FormComponent {\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tname: '',\n\t\t\tmail: '',\n\t\t\tphone: '',\n\t\t\tcomment: '',\n\t\t\tcode: '',\n\t\t\tdata: '',\n\t\t\tisOpen: false\n\t\t};\n\n\t\tthis.validatorTypes = encounterValidator;\n\t\tthis.resetCheckout = this.resetCheckout.bind(this);\n\t\tthis.handleSubmit = this.handleSubmit.bind(this);\n\t\tthis.handleChange = this.handleChange.bind(this);\n\t}\n\n\tcomponentDidMount () {\n\t\tthis.setState({\n\t\t\tisOpen: true,\n\t\t\tskype: this.props.data.skype,\n\t\t\temail: this.props.data.email,\n\t\t\tcost: this.props.cost,\n\t\t\tpackageDiscount: this.props.data.packageDiscount,\n\t\t\tpromoDiscount: this.props.data.promoDiscount,\n\t\t\tdata: this.props.data\n\t\t});\n\t}\n\n    getValidatorData() {\n        return this.state\n    }\n\n\tresetCheckout () {\n\t\tthis.setState({\n            name: '',\n            mail: '',\n            phone: '',\n            comment: '',\n\t\t\tcode: '',\n\t\t\tisOpen: false\n\t\t});\n\n\t\tthis.props.resetCheckout();\n\t\tthis.props.dispatch(resetEncounter());\n\t}\n\n\thandleChange (e) {\n\t\tthis.setState({ [e.target.id]: e.target.value })\n\t}\n\n\thandleSubmit () {\n\t\tthis.props.validate((error) => {\n            this.basket.style.height = this.front.offsetHeight  + 40 + 'px';\n            if (!error) {\n                this.basket.style.height = this.front.offsetHeight + 'px';\n                this.props.dispatch(saveEncounter(this.state));\n\t\t\t}\n        })\n\t}\n\n\tgetValidationMessages (prop) {\n\t\treturn (\n            this.props.getValidationMessages(prop).map((message) => {\n\t\t\t\treturn <span className=\"error\">{message}</span>;\n            })\n\t\t)\n\t}\n\n\trender () {\n\t\tconst { t } = this.props;\n        const front = (this.props.save === true) ? 'front none' : 'front';\n        const back = (this.props.save === false) ? 'back none' : 'back';\n        const skypeCost = this.state.skype ? this.state.skype.cost : 0;\n        const skypeDurationFactor = this.props.data.skypeDuration.factor;\n\t\tconst emailCost = this.state.email ? this.props.emailDiscount(this.state.email) / this.state.email.week : 0;\n\t\tconst nWeeks = this.state.email ? this.state.email.week : 0;\n\n\t\tif (this.state.isOpen === true) {\n            return (\n\t\t\t\t<div ref={(checkout) => { this.checkout = checkout; }} className=\"checkout\">\n\t\t\t\t\t<div ref={(basket) => { this.basket = basket; }} className=\"basket\">\n\t\t\t\t\t\t<div className=\"header\" />\n\t\t\t\t\t\t<div className=\"outer-frame\">\n\t\t\t\t\t\t\t<div className=\"inner-frame\">\n\t\t\t\t\t\t\t\t<svg onClick={ this.resetCheckout } viewBox=\"0 0 94.926 94.926\">\n\t\t\t\t\t\t\t\t\t<path d=\"M55.931,47.463L94.306,9.09c0.826-0.827,0.826-2.167,0-2.994L88.833,0.62C88.436,0.224,87.896,0,87.335,0   c-0.562,0-1.101,0.224-1.498,0.62L47.463,38.994L9.089,0.62c-0.795-0.795-2.202-0.794-2.995,0L0.622,6.096   c-0.827,0.827-0.827,2.167,0,2.994l38.374,38.373L0.622,85.836c-0.827,0.827-0.827,2.167,0,2.994l5.473,5.476   c0.397,0.396,0.936,0.62,1.498,0.62s1.1-0.224,1.497-0.62l38.374-38.374l38.374,38.374c0.397,0.396,0.937,0.62,1.498,0.62   s1.101-0.224,1.498-0.62l5.473-5.476c0.826-0.827,0.826-2.167,0-2.994L55.931,47.463z\" fill=\"#c04c9c\"/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t\t\t\t\t<col width=\"60%\" />\n\t\t\t\t\t\t\t\t\t\t<col width=\"20%\" />\n\t\t\t\t\t\t\t\t\t\t<col width=\"20%\" />\n\t\t\t\t\t\t\t\t\t</colgroup>\n\t\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<th>{ t('item') }</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>{ t('weeks') }</th>\n\t\t\t\t\t\t\t\t\t\t\t<th>{ t('price') }</th>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</thead>\n                                    {(() => {\n                                        if (this.state.skype) {\n                                            return(\n                                            \t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{this.state.skype.description}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{this.state.skype.week}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"right\">{Math.round(skypeCost * skypeDurationFactor)} KM</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t)\n                                        }\n                                    })()}\n                                    {(() => {\n                                        if (this.state.email) {\n                                            return(\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{this.state.email.description}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>{this.state.email.week}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"right\">{this.props.emailDiscount(this.state.email)} KM</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n                                            )\n                                        }\n                                    })()}\n                                    <tr>\n\t\t\t\t\t\t\t\t\t\t<td>&nbsp;</td>\n\t\t\t\t\t\t\t\t\t\t<td>&nbsp;</td>\n\t\t\t\t\t\t\t\t\t\t<td>&nbsp;</td>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className=\"right\" colSpan=\"2\">{ t('sum') }</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"right\">{Math.round(skypeCost * skypeDurationFactor) + (emailCost * nWeeks)} KM</td>\n\t\t\t\t\t\t\t\t\t</tr>\n                                    {(() => {\n                                        if (this.props.data.packageDiscount) {\n                                            return (\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"right\" colSpan=\"2\">{ t('packageDiscount') }</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"right\">{this.state.packageDiscount} KM</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n                                            )\n                                        }\n                                    })()}\n                                    {(() => {\n                                        if (this.props.data.packageDiscount > 0) {\n                                        \tconst className = this.state.promoDiscount\n\t\t\t\t\t\t\t\t\t\t\t\t? 'right' : 'right heavy';\n\n                                        \treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className={className} colSpan=\"2\">{ t('sumWithPackageDiscount')}</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className={className}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(Math.round(this.state.skype.cost * skypeDurationFactor) + (emailCost * nWeeks)) - this.state.packageDiscount} KM\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n                                            )\n                                        }\n                                    })()}\n                                    {(() => {\n                                        if (this.props.data.promoDiscount) {\n                                            return(\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"right\" colSpan=\"2\">{ t('voucherDiscount') }</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"right\">{this.state.promoDiscount} KM</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n                                            )\n                                        }\n                                    })()}\n                                    {(() => {\n                                        if (this.state.promoDiscount) {\n                                            return (\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"right heavy\" colSpan=\"2\">{ t('total') }</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"right heavy\">{ this.state.cost.total } KM</td>\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n                                            )\n                                        }\n                                    })()}\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t<div ref={(front) => { this.front = front; }} className={front}>\n\t\t\t\t\t\t\t\t\t<h1>{ t('heading') }</h1>\n\t\t\t\t\t\t\t\t\t<div className=\"form-element-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"name\">{ t('name') }</label>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tonChange={ this.handleChange }\n\t\t\t\t\t\t\t\t\t\t\tid=\"name\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.name}/>\n\t\t\t\t\t\t\t\t\t\t{this.getValidationMessages('name')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-element-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"phone\">{ t('phone') }</label>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tonChange={ this.handleChange }\n\t\t\t\t\t\t\t\t\t\t\tid=\"phone\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.phone}/>\n\t\t\t\t\t\t\t\t\t\t{this.getValidationMessages('phone')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-element-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"email\">{ t('email') }</label>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tonChange={ this.handleChange }\n\t\t\t\t\t\t\t\t\t\t\tid=\"mail\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.mail}/>\n\t\t\t\t\t\t\t\t\t\t{this.getValidationMessages('mail')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-element-wrapper\">\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"comment\">{ t('comment') }</label>\n\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\tclassName={ this.getValidatorData('comment') }\n\t\t\t\t\t\t\t\t\t\t\tonChange={ this.handleChange }>\n\t\t\t\t\t\t\t\t\t\t\t{this.state.comment}\n\t\t\t\t\t\t\t\t\t\t</textarea>\n\t\t\t\t\t\t\t\t\t\t{this.getValidationMessages('comment')}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"form-buttons\">\n\t\t\t\t\t\t\t\t\t\t<button onClick={ this.resetCheckout }>{ t('back') }</button>\n\t\t\t\t\t\t\t\t\t\t<button onClick={ this.handleSubmit }>{ t('placeOrder') }</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className={back}>\n\t\t\t\t\t\t\t\t\t<h1>{ t('heading') }</h1>\n\t\t\t\t\t\t\t\t\t<p>{ t('pleasePay') }</p>\n\t\t\t\t\t\t\t\t\t<p>YYY YYY YYY YYY</p>\n\t\t\t\t\t\t\t\t\t<p>{ t('includeIdData')}</p>\n\t\t\t\t\t\t\t\t\t<p >{this.props.cost.code}</p>\n\t\t\t\t\t\t\t\t\t<p>{ t('callbackAffirmation') }</p>\n\t\t\t\t\t\t\t\t\t<p>{ t('invoiceAffirmation') }</p>\n\t\t\t\t\t\t\t\t\t<p>Mnogo hvala, tim zdravilje</p>\n\t\t\t\t\t\t\t\t\t<button onClick={ this.resetCheckout }>{ t('close') }</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n            );\n        } else {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nCheckout.propTypes = { dispatch: PropTypes.func };\n\nconst mapStateToProps = (state) => ({\n\tsave: state.encounter.saved\n});\n\nexport default connect(mapStateToProps)(translate('checkoutView')(validation(strategy(i18nValidation()))(Checkout)));\n"]}